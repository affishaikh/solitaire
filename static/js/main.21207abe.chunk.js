(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,a,t){e.exports=t(18)},18:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(11),i=t.n(o),c=t(1),u=t(3),d=t(5),s=t(4),l=t(6),p=t(2),m=(t(8),function(e){function a(){var e,t;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=Object(d.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(n)))).drag=function(e){e.dataTransfer.setData("text",e.target.id)},t}return Object(l.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"container purple card",onClick:this.props.onClick},this.props.unicode)}}]),a}(n.a.Component)),b=function(e){function a(){return Object(c.a)(this,a),Object(d.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.props.card,a=e.unicode,t=e.color;this.props.drag&&(this.drag=this.props.drag);var r="card "+t+" "+this.props.className;return n.a.createElement("div",{draggable:"true",id:a,onDragStart:this.props.drag,className:r},a)}}]),a}(n.a.Component),h=function(e){function a(){return Object(c.a)(this,a),Object(d.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(u.a)(a,[{key:"drag",value:function(e){var a=e.target.id;e.dataTransfer.setData("cardIds",JSON.stringify([a])),e.dataTransfer.setData("sourceId",e.target.parentNode.id)}},{key:"render",value:function(){return this.props.card?n.a.createElement("div",{className:"container",id:"pile"},n.a.createElement(b,{drag:this.drag.bind(this),card:this.props.card})):n.a.createElement("div",{className:"container"})}}]),a}(n.a.Component),v=function(e){function a(){return Object(c.a)(this,a),Object(d.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"stock-side"},n.a.createElement(m,{unicode:this.props.unicode,stackLength:this.props.stackLength,onClick:this.props.onStackClick}),n.a.createElement(h,{card:this.props.card}))}}]),a}(n.a.Component),f=[{type:"spade",number:1,color:"black",unicode:"\ud83c\udca1"},{type:"spade",number:2,color:"black",unicode:"\ud83c\udca2"},{type:"spade",number:3,color:"black",unicode:"\ud83c\udca3"},{type:"spade",number:4,color:"black",unicode:"\ud83c\udca4"},{type:"spade",number:5,color:"black",unicode:"\ud83c\udca5"},{type:"spade",number:6,color:"black",unicode:"\ud83c\udca6"},{type:"spade",number:7,color:"black",unicode:"\ud83c\udca7"},{type:"spade",number:8,color:"black",unicode:"\ud83c\udca8"},{type:"spade",number:9,color:"black",unicode:"\ud83c\udca9"},{type:"spade",number:10,color:"black",unicode:"\ud83c\udcaa"},{type:"spade",number:11,color:"black",unicode:"\ud83c\udcab"},{type:"spade",number:12,color:"black",unicode:"\ud83c\udcad"},{type:"spade",number:13,color:"black",unicode:"\ud83c\udcae"},{type:"club",number:1,color:"black",unicode:"\ud83c\udcd1"},{type:"club",number:2,color:"black",unicode:"\ud83c\udcd2"},{type:"club",number:3,color:"black",unicode:"\ud83c\udcd3"},{type:"club",number:4,color:"black",unicode:"\ud83c\udcd4"},{type:"club",number:5,color:"black",unicode:"\ud83c\udcd5"},{type:"club",number:6,color:"black",unicode:"\ud83c\udcd6"},{type:"club",number:7,color:"black",unicode:"\ud83c\udcd7"},{type:"club",number:8,color:"black",unicode:"\ud83c\udcd8"},{type:"club",number:9,color:"black",unicode:"\ud83c\udcd9"},{type:"club",number:10,color:"black",unicode:"\ud83c\udcda"},{type:"club",number:11,color:"black",unicode:"\ud83c\udcdb"},{type:"club",number:12,color:"black",unicode:"\ud83c\udcdd"},{type:"club",number:13,color:"black",unicode:"\ud83c\udcde"},{type:"diamond",number:1,color:"red",unicode:"\ud83c\udcc1"},{type:"diamond",number:2,color:"red",unicode:"\ud83c\udcc2"},{type:"diamond",number:3,color:"red",unicode:"\ud83c\udcc3"},{type:"diamond",number:4,color:"red",unicode:"\ud83c\udcc4"},{type:"diamond",number:5,color:"red",unicode:"\ud83c\udcc5"},{type:"diamond",number:6,color:"red",unicode:"\ud83c\udcc6"},{type:"diamond",number:7,color:"red",unicode:"\ud83c\udcc7"},{type:"diamond",number:8,color:"red",unicode:"\ud83c\udcc8"},{type:"diamond",number:9,color:"red",unicode:"\ud83c\udcc9"},{type:"diamond",number:10,color:"red",unicode:"\ud83c\udcca"},{type:"diamond",number:11,color:"red",unicode:"\ud83c\udccb"},{type:"diamond",number:12,color:"red",unicode:"\ud83c\udccd"},{type:"diamond",number:13,color:"red",unicode:"\ud83c\udcce"},{type:"heart",number:1,color:"red",unicode:"\ud83c\udcb1"},{type:"heart",number:2,color:"red",unicode:"\ud83c\udcb2"},{type:"heart",number:3,color:"red",unicode:"\ud83c\udcb3"},{type:"heart",number:4,color:"red",unicode:"\ud83c\udcb4"},{type:"heart",number:5,color:"red",unicode:"\ud83c\udcb5"},{type:"heart",number:6,color:"red",unicode:"\ud83c\udcb6"},{type:"heart",number:7,color:"red",unicode:"\ud83c\udcb7"},{type:"heart",number:8,color:"red",unicode:"\ud83c\udcb8"},{type:"heart",number:9,color:"red",unicode:"\ud83c\udcb9"},{type:"heart",number:10,color:"red",unicode:"\ud83c\udcba"},{type:"heart",number:11,color:"red",unicode:"\ud83c\udcbb"},{type:"heart",number:12,color:"red",unicode:"\ud83c\udcbd"},{type:"heart",number:13,color:"red",unicode:"\ud83c\udcbe"}],y=function(e){return f.find(function(a){return a.unicode===e})},k=function(e){return+e.split("-")[1]},F=t(7),O=t.n(F),T=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(d.a)(this,Object(s.a)(a).call(this,e))).drop=t.drop.bind(Object(p.a)(Object(p.a)(t))),t.allowDrop=t.allowDrop.bind(Object(p.a)(Object(p.a)(t))),t.addToFoundation=t.props.addToFoundation,t.removeFromFoundation=t.props.removeFromFoundation,t.removeFromPile=t.props.removeFromPile,t.removeFromTableau=t.props.removeFromTableau,t}return Object(l.a)(a,e),Object(u.a)(a,[{key:"allowDrop",value:function(e){e.preventDefault()}},{key:"drag",value:function(e){e.dataTransfer.setData("id",e.target.id),e.dataTransfer.setData("sourceId",e.target.parentNode.id)}},{key:"getIndex",value:function(e){return+e.split("-")[1]}},{key:"areConsecutiveOfSameSuit",value:function(e,a){return e.type===a.type&&e.number===a.number-1}},{key:"canPlayedOnFoundation",value:function(e){if(0===this.props.foundation.length)return 1===e.number;var a=O.a.last(this.props.foundation);return!!this.areConsecutiveOfSameSuit(a,e)||void 0}},{key:"drop",value:function(e){e.preventDefault();var a=JSON.parse(e.dataTransfer.getData("cardIds")),t=e.dataTransfer.getData("sourceId"),r=a[0],n=y(r),o=k(this.props.id);if(this.canPlayedOnFoundation(n)){this.addToFoundation(o,n);var i=k(t);return t.startsWith("tableau")?this.removeFromTableau(i,[n]):t.startsWith("foundation")?this.removeFromFoundation(i):void this.removeFromPile()}}},{key:"render",value:function(){var e=O.a.last(this.props.foundation);return e?n.a.createElement("div",{id:this.props.id,onDragOver:this.allowDrop,onDrop:this.drop,className:"container"},n.a.createElement(b,{drag:this.drag.bind(this),card:e})):n.a.createElement("div",{id:this.props.id,onDragOver:this.allowDrop,onDrop:this.drop,className:"container"})}}]),a}(n.a.Component),j=function(e){function a(){return Object(c.a)(this,a),Object(d.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(u.a)(a,[{key:"createFoundations",value:function(e){var a=this.props.foundations;return n.a.createElement(T,{id:"foundation-"+e,key:"foundation-"+e,onDrop:this.props.onDrop,addToFoundation:this.props.addToFoundation,removeFromFoundation:this.props.removeFromFoundation,removeFromPile:this.props.removeFromPile,removeFromTableau:this.props.removeFromTableau,foundation:a[e]})}},{key:"render",value:function(){var e=[0,1,2,3].map(this.createFoundations.bind(this));return n.a.createElement("div",{className:"foundations"},e)}}]),a}(n.a.Component),D=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(d.a)(this,Object(s.a)(a).call(this,e))).allowDrop=function(e){e.preventDefault()},t.drop=t.drop.bind(Object(p.a)(Object(p.a)(t))),t.addToTableau=t.props.addToTableau,t.removeFromPile=t.props.removeFromPile,t.removeFromFoundation=t.props.removeFromFoundation,t.removeFromTableau=t.props.removeFromTableau,t}return Object(l.a)(a,e),Object(u.a)(a,[{key:"createFaceDownCards",value:function(e){var a={unicode:"\ud83c\udca0",color:"purple"};return e.map(function(){return n.a.createElement(b,{card:a,className:"tableau-card"})})}},{key:"createFaceUpCard",value:function(e){var a=this;return e.map(function(e){return n.a.createElement(b,{className:"tableau-card",drag:a.drag.bind(a),card:e})})}},{key:"createCards",value:function(e){return{faceDownCards:this.createFaceDownCards(e.faceDownCards),faceUpCards:this.createFaceUpCard(e.faceUpCards)}}},{key:"drag",value:function(e){var a=e.target.id,t=this.props.tableau.faceUpCards,r=t.findIndex(function(e){return e.unicode===a}),n=t.slice(r).map(function(e){return e.unicode});e.dataTransfer.setData("cardIds",JSON.stringify(n)),e.dataTransfer.setData("sourceId",e.target.parentNode.id)}},{key:"getIndex",value:function(e){return+e.split("-")[1]}},{key:"isAlternateDescendant",value:function(e,a){return e.color!==a.color&&e.number===a.number+1}},{key:"isTableauEmpty",value:function(){var e=this.props.tableau,a=e.faceUpCards,t=e.faceDownCards;return 0===a.length&&0===t.length}},{key:"canPlayedOnTableau",value:function(e){var a=this.props.tableau.faceUpCards,t=O.a.last(a);return this.isTableauEmpty()?13===e.number:!!this.isAlternateDescendant(t,e)}},{key:"getCards",value:function(e){return e.map(function(e){return y(e)})}},{key:"drop",value:function(e){var a=e.dataTransfer.getData("sourceId"),t=JSON.parse(e.dataTransfer.getData("cardIds")),r=k(a),n=k(this.props.id),o=this.getCards(t);if(this.canPlayedOnTableau(O.a.first(o)))return this.addToTableau(n,o),a.startsWith("pile")?this.removeFromPile():a.startsWith("foundation")?this.removeFromFoundation(r):void this.removeFromTableau(r,o)}},{key:"render",value:function(){var e=this.props.tableau;if(0===e.faceDownCards.length&&0===e.faceUpCards.length)return n.a.createElement("div",{onDragOver:this.allowDrop,onDrop:this.drop,id:this.props.id,className:"tableau"},n.a.createElement("div",{className:"empty-tableau-card"}));var a=this.createCards(e),t=a.faceDownCards,r=a.faceUpCards;return n.a.createElement("div",{onDragOver:this.allowDrop,onDrop:this.drop,className:"tableau",id:this.props.id},t," ",r)}}]),a}(n.a.Component),g=function(e){function a(){return Object(c.a)(this,a),Object(d.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(u.a)(a,[{key:"createTableaus",value:function(e){var a=this,t=0;return e.map(function(e){var r="tableau-"+t++;return n.a.createElement(D,{addToTableau:a.props.addToTableau,removeFromFoundation:a.props.removeFromFoundation,removeFromPile:a.props.removeFromPile,removeFromTableau:a.props.removeFromTableau,onDrop:a.props.onDrop,id:r,key:r,tableau:e})})}},{key:"render",value:function(){var e=this.props.tableaus;return n.a.createElement("div",{className:"tableaus"},this.createTableaus(e))}}]),a}(n.a.Component),C=function e(a,t,r,n){Object(c.a)(this,e),this.type=a,this.number=t,this.unicode=r,this.color=n},E=function(e){function a(){return Object(c.a)(this,a),Object(d.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(l.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"pop-up"},n.a.createElement("div",null,"You have won the game"),n.a.createElement("a",{href:"/"},"Play again"))}}]),a}(n.a.Component),w=function(e){function a(e){var t;Object(c.a)(this,a);var r=(t=Object(d.a)(this,Object(s.a)(a).call(this,e))).createDeck(),n=t.createTableausFromDeck(O.a.cloneDeep(r)),o=n.stack,i=n.tableaus;return t.addToFoundation=t.addToFoundation.bind(Object(p.a)(Object(p.a)(t))),t.addToTableau=t.addToTableau.bind(Object(p.a)(Object(p.a)(t))),t.removeFromPile=t.removeFromPile.bind(Object(p.a)(Object(p.a)(t))),t.removeFromFoundation=t.removeFromFoundation.bind(Object(p.a)(Object(p.a)(t))),t.removeFromTableau=t.removeFromTableau.bind(Object(p.a)(Object(p.a)(t))),t.state={tableaus:i,hasWon:!1,stack:o,foundations:[[],[],[],[]],pile:[]},t}return Object(l.a)(a,e),Object(u.a)(a,[{key:"getIndex",value:function(e){return e.split("-")[1]}},{key:"isSourceFoundation",value:function(e){return e.startsWith("foundation")}},{key:"isSwappingRequired",value:function(e){return 0===e.faceUpCards.length&&e.faceDownCards.length>0}},{key:"removeFromTableau",value:function(e,a){var t=this;this.setState(function(r){var n=O.a.cloneDeep(r.tableaus),o=n[e],i=a.length;if(o.faceUpCards.splice(-i),t.isSwappingRequired(o)){var c=O.a.last(o.faceDownCards);o.faceDownCards.pop(),o.faceUpCards.push(c)}return{tableaus:n}})}},{key:"addToTableau",value:function(e,a){this.setState(function(t){var r=O.a.cloneDeep(t.tableaus),n=r[e];return n.faceUpCards=n.faceUpCards.concat(a),{tableaus:r}})}},{key:"createDeck",value:function(){var e=f.map(function(e){return new C(e.type,e.number,e.unicode,e.color)});return O.a.shuffle(e)}},{key:"createTableausFromDeck",value:function(e){for(var a=[],t=O.a.cloneDeep(e),r=1;r<=7;r++){var n=t.splice(-r),o={faceDownCards:n.slice(0,n.length-1),faceUpCards:n.slice(-1)};a.push(o)}return{stack:t,tableaus:a}}},{key:"removeFromPile",value:function(){this.setState(function(e){var a=O.a.cloneDeep(e.pile);return a.shift(),{pile:a}})}},{key:"removeFromFoundation",value:function(e){this.setState(function(a){var t=O.a.cloneDeep(a.foundations);return t[e].pop(),{foundations:t}})}},{key:"hasWon",value:function(e){return e.every(function(e){return 13===e.length})}},{key:"addToFoundation",value:function(e,a){var t=this;this.setState(function(r){var n=O.a.cloneDeep(r.foundations);n[e].push(a);var o=!1;return t.hasWon(n)&&(o=!0),{foundations:n,hasWon:o}})}},{key:"addToPile",value:function(e){this.setState(function(a){var t=O.a.cloneDeep(a.pile);return t.unshift(e),{pile:t}})}},{key:"drawCard",value:function(){var e=O.a.last(this.state.stack);this.setState(function(e){e.stack.pop()}),this.addToPile(e)}},{key:"reloadStack",value:function(){this.setState(function(e){return{stack:O.a.cloneDeep(e.pile),pile:[]}})}},{key:"getDetailsForStack",value:function(){var e=this.drawCard.bind(this),a="\ud83c\udca0";return 0===this.state.stack.length&&(e=this.reloadStack.bind(this),a="\u21bb"),{onStackClick:e,unicode:a}}},{key:"render",value:function(){var e=this.getDetailsForStack(),a=e.onStackClick,t=e.unicode;return this.state.hasWon?n.a.createElement(E,null):n.a.createElement("main",null,n.a.createElement("div",{className:"upper-side"},n.a.createElement(v,{onStackClick:a,unicode:t,stackLength:this.state.stack.length,card:O.a.head(this.state.pile)}),n.a.createElement(j,{foundation:this.state.foundations,onDrop:this.dropOnFoundation,addToFoundation:this.addToFoundation,removeFromFoundation:this.removeFromFoundation,removeFromPile:this.removeFromPile,removeFromTableau:this.removeFromTableau,foundations:this.state.foundations})),n.a.createElement(g,{addToTableau:this.addToTableau,removeFromFoundation:this.removeFromFoundation,removeFromPile:this.removeFromPile,removeFromTableau:this.removeFromTableau,onDrop:this.dropOnTableau,tableaus:this.state.tableaus}))}}]),a}(n.a.Component);i.a.render(n.a.createElement(w,null),document.getElementById("root"))},8:function(e,a,t){}},[[12,1,2]]]);
//# sourceMappingURL=main.21207abe.chunk.js.map